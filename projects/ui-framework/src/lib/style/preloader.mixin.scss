@import '../../style/colors';
@import '../../style/mixins';

$preloader-anim-duration: 1500ms;
$preloader-color: $grey-600;

$preloader-svg: url("data:image/svg+xml,%3Csvg viewBox='0 0 210 60' width='210' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='#{uri-encode-color($preloader-color)}'%3E%3Ccircle cx='30' cy='30' r='30'%3E%3Canimate attributeName='fill-opacity' dur='#{$preloader-anim-duration}' repeatCount='indefinite' values='0;.6;1;1;1;.6;0;0'/%3E%3Canimate attributeName='r' dur='#{$preloader-anim-duration}' repeatCount='indefinite' values='0;0;10;20;30;20;10;0'/%3E%3C/circle%3E%3Ccircle cx='105' cy='30' r='30'%3E%3Canimate attributeName='fill-opacity' dur='#{$preloader-anim-duration}' repeatCount='indefinite' values='0;0;.6;1;1;1;.6;0'/%3E%3Canimate attributeName='r' dur='#{$preloader-anim-duration}' repeatCount='indefinite' values='10;0;0;10;20;30;20;10'/%3E%3C/circle%3E%3Ccircle cx='180' cy='30' r='30'%3E%3Canimate attributeName='fill-opacity' dur='#{$preloader-anim-duration}' repeatCount='indefinite' values='.6;0;0;.6;1;1;1;.6'/%3E%3Canimate attributeName='r' dur='#{$preloader-anim-duration}' repeatCount='indefinite' values='20;10;0;0;10;20;30;20'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E");

$preloader-size: 48px 12px;

@mixin mini-preloader(
  $size: $preloader-size,
  $base-selector: '&:empty',
  // use '&' to insert preloader on non-empty container element
    $full-size-selector: '&',
  $abs-pos-center: false,
  $color: var(--primary-500)
) {
  #{$base-selector} {
    &:before {
      content: 'Loading...';
      @include text-hide;
      display: block;
      overflow: hidden;
      @include size($size);

      @include mask-image($img: $preloader-svg, $color: $color);

      @if $abs-pos-center {
        position: absolute;
        top: calc(50% - 6px);
        left: calc(50% - 24px);
        z-index: 0;
      }
      @content;
    }

    @if ($full-size-selector) {
      #{$full-size-selector} {
        @include flex-align;
        @include size(100%);
        flex-grow: 5;
      }
    }
  }
}
