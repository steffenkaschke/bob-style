<label *ngIf="label && !hideLabelOnFocus"
       class="bfe-label"
       [attr.for]="id">{{label}}</label>

<div class="bfe-wrap has-suffix"
     [ngClass]="{'has-prefix': hasPrefix || showPrefix, 'panel-open': panelOpen, 'panel-above':
     positionClassList['panel-above'],
     'panel-below': positionClassList['panel-below']}"
     (click)="openPanel()"
     cdkOverlayOrigin>

  <div *ngIf="hasPrefix || showPrefix"
       class="bfe-prefix"
       #prefix>
    <ng-content select="[input-prefix]"></ng-content>
  </div>

  <span class="bfe-input trigger-input"
        #triggerInput
        [b-truncate-tooltip]="1"
        [expectChanges]="true"
        [trustCssVars]="true"
        [attr.data-placeholder]="!triggerValue ? (hideLabelOnFocus ?label : placeholder) : null">
    {{triggerValue}}
  </span>

  <div class="bfe-suffix">
    <span *ngIf="truncate.tooltipEnabled && selectedValuesMap.length > 0"
          class="total-values">
      ({{selectedValuesMap.length}})
    </span>
    <span class="select-chevron"
          [ngClass]="{up: panelOpen, down: !panelOpen}"></span>
  </div>
</div>

<p b-input-message
   *ngIf="hintMessage || warnMessage || errorMessage"
   [hintMessage]="hintMessage"
   [warnMessage]="warnMessage"
   [errorMessage]="errorMessage"
   [disabled]="disabled"></p>

<ng-template #templateRef>
  <div class="b-select-panel"
       [ngClass]="positionClassList">
    <b-multi-list class="b-select-list"
                  (selectChange)="onSelect($event)"
                  [options]="options"
                  [maxHeight]="listElHeight*6"
                  [showSingleGroupHeader]="showSingleGroupHeader"
                  [listActions]="listActions"
                  (apply)="onApply()"
                  (cancel)="onCancel()">
    </b-multi-list>
  </div>
</ng-template>
